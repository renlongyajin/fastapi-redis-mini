# 当前开发进度

> 更新时间：`$(date)` 请在实际 commit 时更新为真实时间。

## 1. 里程碑概览
| 里程碑 | 内容 | 状态 | 备注 |
| --- | --- | --- | --- |
| M1 | 方案设计 + 技术选型 | ✅ 已完成 | 《项目总体分析.md》与《详细开发手册.md》已给出完整指导 |
| M2 | FastAPI API 原型 | ⬜ 未开始 | 计划先实现提交/查询接口并完成最小集成测试 |
| M3 | Worker + Redis Stream | ⬜ 未开始 | 包含消费组、并发控制与错误处理 |
| M4 | Profiling & 压测脚本 | ⬜ 未开始 | `tools/profile.py`、`tools/load_test.py` |
| M5 | Docker 化与一键启动 | ⬜ 未开始 | Dockerfile + docker-compose.yml |
| M6 | 面试 Demo 彩排 | ⬜ 未开始 | 包含讲解稿、Q&A 清单 |

## 2. 近期工作明细
| 序号 | 任务 | 负责人 | 状态 | 说明 |
| --- | --- | --- | --- | --- |
| T1 | 编写总体方案文档 | 自己 | ✅ 完成 | 汇总于《项目总体分析.md》 |
| T2 | 编写详细开发手册 | 自己 | ✅ 完成 | 包含目录结构、流程与命令 |
| T3 | 初始化代码仓库/依赖 | 自己 | ⬜ 待做 | 建议使用 Poetry 或 pip-tools |
| T4 | 实现 API + Redis 连接 | 自己 | ⬜ 待做 | 完成后可进行 e2e 测试 |
| T5 | 实现 Worker 与任务处理 | 自己 | ⬜ 待做 | 包含异常回写与缓存刷新 |
| T6 | 添加 Profiling & 压测脚本 | 自己 | ⬜ 待做 | 验证性能口径 |
| T7 | 完成 Docker 化与 README | 自己 | ⬜ 待做 | 需确保 `docker compose up` 可跑通 |

## 3. 下周优先级
1. 初始化仓库与依赖管理（T3）
2. 按手册实现 FastAPI API 与 Redis 交互（T4）
3. 同步创建最小 Worker（T5），保证端到端流程可演示

## 4. 风险提示
- 时间紧：需保证每日至少 2~3 小时动手，否则项目无法在面试前落地。
- Redis 经验不足：建议先用 Docker 本地跑通，再阅读官方 Stream 文档以避免消费组踩坑。
- 文档 vs 代码偏差：实现过程中若有改动，务必同步更新上述两份手册，保持面试口径一致。

## 5. 下一步行动清单
- [ ] 创建仓库并提交本文档 + 其他两份文档
- [ ] 搭建虚拟环境，安装 FastAPI/Redis 等依赖
- [ ] 按 `详细开发手册.md` 完成 API 原型并编写最小测试
- [ ] 在 README 中添加运行命令，作为未来面试 demo 的脚本化依据

> 请在每个里程碑完成后更新本文件，做到“随时展示进度”。

## 6. 开发日志
- 2025-11-12 13:46: 覆盖更新《下一步开发计划》，明确以端到端测试为首要任务并同步记录。
- 2025-11-12 13:55: 按 TDD 要求新增 `tests/test_tasks_flow.py`，覆盖提交/查询/缓存与失败路径的端到端用例。
- 2025-11-12 14:05: 在 `conda activate fastapi-redis-mini` 环境安装 FastAPI、Redis、pytest 等依赖并生成 `requirements.txt`。
- 2025-11-12 14:20: 实现基础 `infra`、`app`、`worker` 结构，完成任务提交、查询与 Worker 处理逻辑以支撑端到端测试。
- 2025-11-12 14:28: 补充 `pydantic-settings` 依赖并修正设置模块以兼容 Pydantic v2 的配置加载。
- 2025-11-12 14:40: 调整 pytest fixtures 与 httpx `ASGITransport` 用法，清理 Pydantic 警告并确保端到端测试 100% 通过。
- 2025-11-12 14:45: 更新《下一步开发计划》，聚焦 Profiling 与压测工具的 TDD 实施路径。
- 2025-11-12 14:55: 为 Profiling 与压测工具编写单测 (`tests/test_tools_profile.py`、`tests/test_tools_load_test.py`)，引导后续实现。
- 2025-11-12 15:05: 实现 `tools/profile.py`、`tools/load_test.py`、README，用例全部通过并输出使用指南。
- 2025-11-12 15:10: 再次更新《下一步开发计划》，转向 Docker 化与部署脚本的测试驱动实现。
